# This file is the entry point to configure your own services.
# Files in the packages/ subdirectory configure your dependencies.

# Put parameters here that don't need to change on each machine where the app is deployed
# https://symfony.com/doc/current/best_practices.html#use-parameters-for-application-configuration
parameters:
    locale: fr
    locales: en|fr
    files_directory: '%kernel.project_dir%/public'

services:
    # default configuration for services in *this* file
    _defaults:
        public: true
        autowire: true      # Automatically injects dependencies in your services.
        autoconfigure: true # Automatically registers your services as commands, event subscribers, etc.

    # makes classes in src/ available to be used as services
    # this creates a service per class whose id is the fully-qualified class name
    App\:
        resource: '../src/'
        exclude:
            - '../src/DependencyInjection/'
            - '../src/Entity/'
            - '../src/Form/Transformer/'
            - '../src/Kernel.php'

    # add more service definitions when explicit configuration is needed
    # please note that last definitions always *replace* previous ones
    App\Service\FileUploader:
        arguments:
            $targetDirectory: '%files_directory%'
            
    #sonata admin services
    admin.region:
        class: App\Admin\RegionAdmin
        tags:
            - { name: sonata.admin, model_class: App\Entity\Region, group: Localisation, icon: 'fas fa-location-arrow',  manager_type: orm, label: Regions }
        calls:
            - [addChild, ['@admin.departement', 'region']]
            - [setTranslationDomain, ['App']]

    admin.departement:
        class: App\Admin\DepartementAdmin
        calls:
            - [setTranslationDomain, ['App']]
        tags:
            - { name: sonata.admin, model_class: App\Entity\Departement, manager_type: orm, group: Localisation, label: Departement }

    admin.stade:
        class: App\Admin\StadeAdmin
        calls:
            - [setTranslationDomain, ['App']]
        tags:
            - { name: sonata.admin, model_class: App\Entity\Stade, manager_type: orm, group: Clubs, icon: 'fab fa-artstation', label: Stades }


    admin.personnel:
        class: App\Admin\PersonnelAdmin
        tags:
            - { name: sonata.admin, model_class: App\Entity\Personnel, group: Acteurs, icon: 'fas fa-users-cog',  manager_type: orm, label: Personnes }
        calls:
            - [addChild, ['@admin.personnel_position', 'personnel']]
            - [addChild, ['@admin.diplome', 'personne']]
            - [addChild, ['@admin.aptitude', 'personne']]
            - [addChild, ['@admin.insurance', 'personnel']]
            - [setTranslationDomain, ['App']]

    admin.diplome:
        class: App\Admin\DiplomeAdmin
        calls:
            - [setTranslationDomain, ['App']]
        tags:
            - { name: sonata.admin, model_class: App\Entity\Diplome, manager_type: orm, group: Acteurs, label: Diplome }

    admin.aptitude:
        class: App\Admin\CertificatAptitudeAdmin
        calls:
            - [setTranslationDomain, ['App']]
        tags:
            - { name: sonata.admin, model_class: App\Entity\CertificatAptitude, manager_type: orm, group: Acteurs, label: Certificat Aptitude }
    
    admin.insurance:
        class: App\Admin\InsuranceAdmin
        calls:
            - [setTranslationDomain, ['App']]
        tags:
            - { name: sonata.admin, model_class: App\Entity\Insurance, manager_type: orm, group: Acteurs, label: Assurance }

    admin.position:
        class: App\Admin\PositionAdmin
        calls:
            - [setTranslationDomain, ['App']]
        tags:
            - { name: sonata.admin, model_class: App\Entity\Position, manager_type: orm, group: Acteurs, label: Positions }

    admin.personnel_position:
        class: App\Admin\PersonnelPositionAdmin
        calls:
            - [setTranslationDomain, ['App']]
        tags:
            - { name: sonata.admin, model_class: App\Entity\PersonnelPosition, manager_type: orm, group: Acteurs, label: Personnes et Position }